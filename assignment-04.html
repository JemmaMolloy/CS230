<!DOCTYPE html>
<!-- Code inspired from JK demo, bootsnip.com and w3schools.com -->
<!-- This was tested on Windows using Google Chrome -->
<!--Assignment 4 Par ii - frontend-->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Use W3.CSS for the Modal -->
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <!-- jQuery and Bootstrap JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style> 
  input[type=text] {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
  }
   #showUserDatabase{
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
  }
  button[type=submit] {
    background-color: #434140;
    color: #ffffff;
    padding: 10px 20px;
    margin: 8px 0;
    border: none;
    cursor: pointer;
    width: 100%;
    opacity: 0.9;
    font-size: 20px;}
button[type=submit]:hover {
  background-color:#3d3c3c;}
  </style>
</head>
<body>
  <!--Form make using booksnip.com though did not use the bootstrap styling-->
  <!--Form for inserting data to database-->
  <div class="container">
    <div class="row justify-content-center">
        <form id="addUserForm" class="form-horizontal">
            <fieldset>
    
            <legend>Information</legend>
            
              
              <label class="col-md-4 control-label" for="title">Title</label>
              <div class="col-md-4">
                  <input id="title" name="title" class="form-control" placeholder="Mx / Ms / Mr / Mrs / Miss / Dr / Other (Specify)" type="text">
              </div>   
          
            
              <label class="col-md-4 control-label" for="firstname">First Name</label>  
              <div class="col-md-4">
              <input id="firstname" name="firstname" type="text" placeholder="First Name" class="form-control input-md" required="">
              </div>
            
              <label class="col-md-4 control-label" for="surname">Surname</label>  
              <div class="col-md-4">
              <input id="surname" name="surname" type="text" placeholder="Surname" class="form-control input-md" required="">
              </div>

              <label class="col-md-4 control-label" for="mobile">Mobile Number</label>  
              <div class="col-md-4">
              <input id="mobile" name="mobile" type="text" placeholder="Mobile Number" class="form-control input-md" required="">
              </div>
            
              <label class="col-md-4 control-label" for="email">Email</label>  
              <div class="col-md-4">
              <input id="email" name="email" type="text" placeholder="Email" class="form-control input-md" required="">
              </div>
          
              <label class="col-md-4 control-label" for="haddressline1">Home Address Line 1</label>  
              <div class="col-md-4">
              <input id="haddressline1" name="haddressline1" type="text" placeholder="Home Address Line 1" class="form-control input-md" required="">
              </div>

              <label class="col-md-4 control-label" for="haddressline2">Home Address Line 2</label>  
              <div class="col-md-4">
              <input id="haddressline2" name="haddressline2" type="text" placeholder="Home Address Line 2" class="form-control input-md">
              </div>
            
              <label class="col-md-4 control-label" for="htown">Home Town</label>  
              <div class="col-md-4">
              <input id="htown" name="htown" type="text" placeholder="Home Town" class="form-control input-md" required="">
              </div>
            
              <label class="col-md-4 control-label" for="hcountycity">Home County/City</label>  
              <div class="col-md-4">
              <input id="hcountycity" name="hcountycity" type="text" placeholder="Home County/City" class="form-control input-md" required="">
              </div>

              <label class="col-md-4 control-label" for="heircode">Home Eircode</label>  
              <div class="col-md-4">
              <input id="heircode" name="heircode" type="text" placeholder="Home Eircode" class="form-control input-md">
              </div>
            
              <label class="col-md-4 control-label" for="saddressline1">Shipping Address Line 1</label>  
              <div class="col-md-4">
              <input id="saddressline1" name="saddressline1" type="text" placeholder="Shipping Address Line 1" class="form-control input-md" required="">
              </div>
            
              <label class="col-md-4 control-label" for="saddressline2">Shipping Address Line 2</label>  
              <div class="col-md-4">
              <input id="saddressline2" name="saddressline2" type="text" placeholder="Shipping Address Line 2" class="form-control input-md">
              </div>
            
              <label class="col-md-4 control-label" for="stown">Shipping Town</label>  
              <div class="col-md-4">
              <input id="stown" name="stown" type="text" placeholder="Shipping Town" class="form-control input-md" required="">
              </div>
            
              <label class="col-md-4 control-label" for="scountycity">Shipping County/City</label>  
              <div class="col-md-4">
              <input id="scountycity" name="scountycity" type="text" placeholder="Shipping County/City" class="form-control input-md" required="">
              </div>
            
              <label class="col-md-4 control-label" for="seircode">Shipping Eircode</label>  
              <div class="col-md-4">
              <input id="seircode" name="seircode" type="text" placeholder="Shipping Eircode" class="form-control input-md">
              </div>
            
              <label class="col-md-4 control-label" for="submit"></label>
              <div class="col-md-4">
                <button type="submit">Submit User Information</button>
              </div>
            </fieldset>
          </form>
        </div> 
      </div>
<!--Form for displaying database data-->
<div class="container">
  <div class="row justify-content-center">
    <form id="getUserDatabaseForm" class="form-horizontal">
        <fieldset>
            <legend>Show User Database</legend>

                <label class="col-md-5 control-label" for="showUserDatabase">User Database</label>
                <div class="col-md-5">
                    <textarea class="form-control" id="showUserDatabase" placeholder = 'Retrieved Database displayed here!'></textarea>
                </div>

                <label class="col-md-5 control-label" for="submit"></label>
                <div class="col-md-5">
                    <button type="submit">Get User Database</button>
                </div>

        </fieldset>
    </form>
  </div>
</div>
<!--modal-->
<div id="modalUserAdded" class="w3-modal w3-animate-opacity">
  <div class="w3-modal-content w3-card-4">
      <header class="w3-container w3-blue-grey">
          <span onclick="document.getElementById('modalUserAdded').style.display='none'"
              class="w3-button w3-large w3-display-topright">&times;</span>
          <h2>User Added to Database!</h2>
      </header>
      <div class="w3-container">
          <p></p>
          <p id="modalUserAddedMessage">Message Text</p>
      </div>
      <footer class="w3-container w3-blue-grey">
          <p></p>
      </footer>
  </div>
</div>
<script>
  $(document).ready(function () {
      //"Add User to Database" submit button click jquery
      $('#addUserForm').submit(function (e) {
          var user = {
              title: $('input[name=title]').val(),
              firstname: $('input[name=firstname]').val(),
              surname: $('input[name=surname]').val(),
              mobile: $('input[name=mobile]').val(),
              email: $('input[name=email]').val(),
              haddressline1: $('input[name=haddressline1]').val(),
              haddressline2: $('input[name=haddressline2]').val(),
              htown: $('input[name=htown]').val(),
              hcountycity: $('input[name=hcountycity]').val(),
              heircode: $('input[name=heircode]').val(),
              saddressline1: $('input[name=saddressline1]').val(),
              saddressline2: $('input[name=saddressline2]').val(),
              stown: $('input[name=stown]').val(),
              scountycity: $('input[name=scountycity]').val(),
              seircode: $('input[name=seircode]').val(),
          };
          $.ajax({
              type: 'POST',
              url: 'http://localhost:8000/api/user',
              data: user
          })
          showUserModal(data);
          
          e.preventDefault();
      });

      // "Get User Database" submit button click jquery
      $('#getUserDatabaseForm').submit(function (e) {
          $.ajax({
              type: 'GET',
              url: 'http://localhost:8000/api/user'
          })
              .done(function (data) {
                  $('#showUserDatabase').val(JSON.stringify(data, null, 2)).trigger('input');
              });
          e.preventDefault(); 
      }); 
      //makes the text box with the dtatbase data auto stretch
      $("#showUserDatabase").on("input", function () {
                this.style.height = (this.scrollHeight) + "px;overflow-y:hidden;";
                this.style.height = "auto";
                this.style.height = (this.scrollHeight) + "px";
            });
    });  
    //show the modal
    function showUserModal(data) {
        document.getElementById('modalUserAddedMessage').innerHTML = data;
        document.getElementById('modalUserAdded').style.display = 'block';
    }
  </script>  
</body>
</html>